{"version":3,"sources":["utils/constants.js","hooks/useStateWithLocalStorage.js","classes/Api.js","api/api.js","api/auth.js","contexts/CurrentUserContext.jsx","components/Main.jsx","components/Form.jsx","components/FormInput.jsx","components/LoginOrRegister.jsx","components/Login.jsx","components/Register.jsx","components/Authentication.jsx","components/ProtectedRoute.jsx","images/logo.svg","components/Header.jsx","components/Card.jsx","components/Footer.jsx","utils/utils.js","utils/FormValidator.js","components/Popup.jsx","components/PopupWithForm.jsx","utils/enableValidation.js","components/EditProfilePopup.jsx","components/EditAvatarPopup.jsx","components/AddPlacePopup.jsx","components/ConfirmDeletePopup.jsx","components/ImagePopup.jsx","components/App.jsx","reportWebVitals.js","index.jsx"],"names":["apiDomain","paths","pathNames","title","action","useStateWithLocalStorage","computed","defaultForComputed","useState","localStorage","JSON","parse","currentState","updateCurrentState","localStorageChanged","useCallback","e","key","newValue","setCurrentState","value","stringify","useEffect","listenerArgs","window","addEventListener","removeEventListener","Api","options","_handleFetch","res","ok","json","Promise","reject","status","this","_baseUrl","baseUrl","_headers","headers","_authFormat","authorization","token","target","method","body","fetch","then","api","url","URL","version","endpoints","users","cards","editProfile","name","about","_customFetch","addCard","link","deleteCard","cardId","changeLikeCardStatus","updateAvatar","avatar","origin","signup","signin","user","email","password","_constructAuthorization","data","defaultUserState","CurrentUserContext","React","createContext","CurrentUserDispatchContext","CurrentUserProvider","children","currentUser","setCurrentUser","getUserInfo","catch","err","console","log","Provider","useCurrentUser","context","useContext","undefined","Error","useCurrentUserDispatcher","objectsAreEqual","first","second","sendApiUpdate","dispatch","updates","func","a","expectedUser","updatedUser","Form","memo","props","onSubmit","finalProps","handleSubmit","preventDefault","defaults","PopupInput","forwardRef","forwardedRef","ref","createRef","type","required","conditionalMinLength","minLength","isFocused","inputProps","current","parentElement","document","activeElement","setTimeout","focus","className","id","propsForInputs","autoCorrect","spellCheck","LoginOrRegister","states","setEmail","setPassword","FormInput","autoFocus","placeholder","autoComplete","onChange","passwordAutocomplete","buttonTitle","withRouter","defaultProps","Login","auth","login","handleLogin","history","push","Register","register","statusCode","to","Authentication","location","pathname","ProtectedRoute","loggedIn","Header","buttonLink","href","homepage","alt","src","logo","credential","onClick","Card","card","likes","isTemporarilyLocal","owner","cardDeleteButtonClassNames","_id","cardDeleteButtonClassNameAttrubited","cardDeleteButtonFinalClassName","join","cardLikeButtonClassNames","some","i","cardLikeButtonClassNameAttributed","cardLikeButtonFinalClassName","onCardClick","onCardDelete","onCardLike","length","defaultCard","defaultCards","Main","useMemo","onEditAvatar","onEditProfile","onAddPlace","map","Math","random","homepageSplitted","split","pop","copyrightLink","Footer","rel","author","popupSelectors","defaultFormConfig","formSelector","inputSelector","submitButtonSelector","inputErrorClass","errorClass","FormValidator","element","_showInputError","inputElement","errorMessage","errorElement","_element","querySelector","classList","add","_data","textContent","_hideInputError","remove","_resetFormErrors","_inputList","forEach","_toggleButtonState","_checkInputValidity","validity","valid","validationMessage","_hasInvalidInput","inputList","disable","_buttonElement","disabled","_validationHandler","_setListeners","Array","from","querySelectorAll","classNameClosed","isOpened","classNameOpened","Popup","classNameForAnimation","setClassNameForAnimation","shouldAppearInDOM","setShouldAppearInDOM","isOpen","blur","showingTimout","clearTimeout","hidingTimeout","filter","el","PopupWithForm","propsWithoutCustom","reset","popupId","validationTimeout","formElement","getElementById","enableValidation","onClose","onReset","EditProfilePopup","setName","setAbout","onUpdateUser","autoCapitalize","maxLength","EditAvatarPopup","useRef","onUpdateAvatar","AddPlacePopup","setTitle","setLink","ConfirmDeletePopup","ImagePopup","setLoggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCards","oldCards","isLiked","expectedCardLikes","like","expectedCard","c","newCard","error","closeAllPopups","getInitialCards","handleCardDelete","handlePopupClick","currentTarget","handleUpdateUser","handleUpdateAvatar","escHandler","handleTokenCheck","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.89815f69.chunk.js","sourcesContent":["export const apiDomain = 'nomoreparties.co';\n\nexport const paths = {\n  login: '/login',\n  register: '/register',\n  main: '/',\n};\n\nexport const pathNames = {\n  login: {\n    title: 'Вход',\n    action: 'Войти',\n  },\n  register: {\n    title: 'Регистрация',\n    action: 'Зарегистрироваться',\n  },\n  quit: {\n    action: 'Выйти',\n  },\n};\n","import { useState, useCallback, useEffect } from 'react';\n\nexport default function useStateWithLocalStorage(computed, defaultForComputed) {\n  const [currentState, updateCurrentState] = useState(\n    localStorage[computed] ? JSON.parse(localStorage[computed]) : defaultForComputed\n  );\n\n  const localStorageChanged = useCallback(\n    e => {\n      if (e.key === computed) {\n        updateCurrentState(e.newValue ? JSON.parse(e.newValue) : defaultForComputed);\n      }\n    },\n    [computed, defaultForComputed]\n  );\n\n  const setCurrentState = useCallback(\n    value => {\n      localStorage[computed] = JSON.stringify(value);\n      updateCurrentState(value);\n    },\n    [computed]\n  );\n\n  useEffect(() => {\n    const listenerArgs = ['storage', localStorageChanged];\n\n    window.addEventListener(...listenerArgs);\n    return () => {\n      window.removeEventListener(...listenerArgs);\n    };\n  }, [localStorageChanged]);\n\n  return [currentState, setCurrentState];\n}\n","export default class Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n\n    this._authFormat = '';\n  }\n\n  _constructAuthorization() {\n    this._headers = {\n      ...this._headers,\n      authorization: this._authFormat + localStorage.token,\n    };\n  }\n\n  _handleFetch = res => (res.ok ? res.json() : Promise.reject(res.status));\n\n  _customFetch(target, method, body) {\n    const options = {\n      headers: this._headers ?? {},\n    };\n\n    if (method && method !== 'GET') {\n      options.method = method;\n      if (method !== 'DELETE') {\n        options.headers['Content-Type'] = 'application/json';\n      }\n    }\n\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n\n    return fetch(`${this._baseUrl}/${target}`, options).then(this._handleFetch);\n  }\n}\n","import Api from '../classes/Api';\nimport { apiDomain } from '../utils/constants';\n\nconst COHORT_ID = 'cohort-24';\nconst TOKEN = '70313b07-c3c0-40aa-a296-04d0e6bc7885';\n\nconst api = {\n  url: new URL(`https://mesto.${apiDomain}`),\n  version: 'v1',\n  endpoints: {\n    users: 'users/me',\n    cards: 'cards',\n  },\n};\n\nclass Features extends Api {\n  getUserInfo() {\n    return this._customFetch(api.endpoints.users);\n  }\n\n  getInitialCards() {\n    return this._customFetch(api.endpoints.cards);\n  }\n\n  editProfile = ({ name, about }) =>\n    this._customFetch(api.endpoints.users, 'PATCH', {\n      name,\n      about,\n    });\n\n  addCard = (name, link) =>\n    this._customFetch(api.endpoints.cards, 'POST', {\n      name,\n      link,\n    });\n\n  deleteCard = cardId => this._customFetch(`${api.endpoints.cards}/${cardId}`, 'DELETE');\n\n  changeLikeCardStatus = (cardId, status) =>\n    this._customFetch(`${api.endpoints.cards}/likes/${cardId}`, status ? 'PUT' : 'DELETE');\n\n  updateAvatar = ({ avatar }) =>\n    this._customFetch(`${api.endpoints.users}/avatar`, 'PATCH', {\n      avatar,\n    });\n}\n\nexport default new Features({\n  baseUrl: `${api.url.origin}/${api.version}/${COHORT_ID}`,\n  headers: {\n    authorization: TOKEN,\n  },\n});\n","import Api from '../classes/Api';\nimport { apiDomain } from '../utils/constants';\n\nconst api = {\n  url: new URL(`https://auth.${apiDomain}`),\n  endpoints: {\n    signup: 'signup',\n    signin: 'signin',\n    user: 'users/me',\n  },\n};\n\nclass Auth extends Api {\n  constructor(options) {\n    super(options);\n\n    this._authFormat = 'Bearer ';\n  }\n\n  register(email, password) {\n    return this._customFetch(api.endpoints.signup, 'POST', { password, email });\n  }\n\n  login(email, password) {\n    return this._customFetch(api.endpoints.signin, 'POST', { password, email });\n  }\n\n  getUserInfo() {\n    this._constructAuthorization();\n\n    return this._customFetch(api.endpoints.user).then(res => res.data);\n  }\n}\n\nexport default new Auth({\n  baseUrl: api.url.origin,\n});\n","import React from 'react';\n\nimport api from '../api/api';\n\nimport useStateWithLocalStorage from '../hooks/useStateWithLocalStorage';\n\nconst defaultUserState = {\n  name: 'Неизвестный',\n  about: 'Потеряно соединение с сервером',\n};\n\nconst CurrentUserContext = React.createContext();\nconst CurrentUserDispatchContext = React.createContext();\n\nfunction CurrentUserProvider({ children }) {\n  const [currentUser, setCurrentUser] = useStateWithLocalStorage('currentUser', defaultUserState);\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then(setCurrentUser)\n      .catch(err => console.log('Couldnt get user info from the server', err));\n  }, [setCurrentUser]);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <CurrentUserDispatchContext.Provider value={setCurrentUser}>\n        {children}\n      </CurrentUserDispatchContext.Provider>\n    </CurrentUserContext.Provider>\n  );\n}\n\nfunction useCurrentUser() {\n  const context = React.useContext(CurrentUserContext);\n  if (context === undefined) {\n    throw new Error('useCurrentUser must be used within a CurrentUserProvider');\n  }\n  return context;\n}\n\nfunction useCurrentUserDispatcher() {\n  const context = React.useContext(CurrentUserDispatchContext);\n  if (context === undefined) {\n    throw new Error('useCurrentUserDispatcher must be used within a CurrentUserProvider');\n  }\n  return context;\n}\n\nfunction objectsAreEqual(first, second) {\n  return JSON.stringify(first) === JSON.stringify(second);\n}\n\nasync function sendApiUpdate(dispatch, user, updates, func) {\n  const expectedUser = { ...user, ...updates };\n  dispatch(expectedUser);\n\n  try {\n    const updatedUser = await api[func](updates);\n    if (!objectsAreEqual(expectedUser, updatedUser)) {\n      dispatch(updatedUser);\n    }\n  } catch (error) {\n    dispatch(user);\n    throw error;\n  }\n}\n\nexport { CurrentUserProvider, useCurrentUser, useCurrentUserDispatcher, sendApiUpdate };\n","import { memo, useMemo } from 'react';\n\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\n\nimport Card from './Card';\n\nconst MAXIMUM_CARDS_QUANTITY = 30;\n\nconst defaultCard = {\n  isTemporarilyLocal: true,\n  name: 'Загрузка...',\n};\n\nconst defaultCards = [];\nfor (let i = 0; i < MAXIMUM_CARDS_QUANTITY; i++) {\n  defaultCards.push(defaultCard);\n}\n\nconst Main = memo(props => {\n  const currentUser = useCurrentUser();\n\n  const cards = useMemo(() => (props.cards.length ? props.cards : defaultCards), [props.cards]);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <button onClick={props.onEditAvatar} type=\"button\" className=\"profile__avatar-container\">\n          <img alt=\"Аватар\" className=\"profile__avatar\" src={currentUser.avatar} />\n        </button>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <p className=\"profile__description\">{currentUser.about}</p>\n          <button onClick={props.onEditProfile} type=\"button\" className=\"profile__edit-button\" />\n        </div>\n        <button onClick={props.onAddPlace} type=\"button\" className=\"profile__add-button\" />\n      </section>\n\n      <section className=\"elements\">\n        <ul className=\"elements__list\">\n          {cards.map(card => (\n            <Card\n              key={card._id ?? Math.random()}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n              card={card}\n            />\n          ))}\n        </ul>\n      </section>\n    </main>\n  );\n});\n\nexport default Main;\n","import { memo, useCallback } from 'react';\n\nconst Form = memo(props => {\n  const { onSubmit, ...finalProps } = props;\n\n  const handleSubmit = useCallback(\n    e => {\n      if (onSubmit) {\n        e.preventDefault();\n\n        onSubmit(e);\n      }\n    },\n    [onSubmit]\n  );\n\n  return (\n    <form action=\"#\" onSubmit={handleSubmit} {...finalProps}>\n      {props.children}\n    </form>\n  );\n});\n\nexport default Form;\n","import { forwardRef, createRef, useEffect } from 'react';\n\nconst defaults = {\n  type: 'text',\n  required: true,\n  minLength: 2,\n};\n\nconst PopupInput = forwardRef((props, forwardedRef) => {\n  const ref = forwardedRef ?? createRef();\n\n  const type = props.type ?? defaults.type;\n\n  const required = props.required ?? defaults.required;\n\n  const conditionalMinLength = type === defaults.type ? defaults.minLength : null;\n  const minLength = props.minLength ?? conditionalMinLength;\n\n  const finalProps = {\n    type,\n    minLength,\n    required,\n    ref,\n  };\n\n  const { isFocused, ...inputProps } = props;\n\n  useEffect(() => {\n    if (\n      isFocused &&\n      ref &&\n      ref.current &&\n      ref.current.parentElement !== document.activeElement.parentElement\n    ) {\n      setTimeout(() => {\n        ref && ref.current && ref.current.focus();\n      }, 50);\n    }\n  }, [isFocused, ref]);\n\n  return (\n    <>\n      <input\n        {...inputProps}\n        className={`form__input${inputProps.className ? ` ${inputProps.className}` : ''}`}\n        {...finalProps}\n      />\n      <p className=\"form__error\" id={`${props.id}-error`} />\n    </>\n  );\n});\n\nexport default PopupInput;\n","import { memo } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport Form from './Form';\nimport FormInput from './FormInput';\n\nconst propsForInputs = {\n  autoCorrect: 'off',\n  spellCheck: false,\n  className: 'form__input_theme_dark',\n};\n\nconst LoginOrRegister = memo(props => {\n  const [email, setEmail] = props.states.email;\n  const [password, setPassword] = props.states.password;\n\n  const handleEmailChange = e => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = e => {\n    setPassword(e.target.value);\n  };\n\n  return (\n    <div className=\"auth\">\n      <h2 className=\"auth__title\">{props.title}</h2>\n\n      <Form onSubmit={props.onSubmit} className=\"form\">\n        <FormInput\n          {...propsForInputs}\n          autoFocus\n          id=\"email\"\n          name=\"email\"\n          type=\"email\"\n          placeholder=\"Email\"\n          autoComplete=\"email\"\n          value={email}\n          onChange={handleEmailChange}\n        />\n        <FormInput\n          {...propsForInputs}\n          id={props.passwordAutocomplete}\n          name=\"password\"\n          type=\"password\"\n          placeholder=\"Пароль\"\n          autoComplete={props.passwordAutocomplete}\n          value={password}\n          onChange={handlePasswordChange}\n        />\n        <button type=\"submit\" className=\"auth__button form__button form__button_theme_dark\">\n          {props.buttonTitle}\n        </button>\n      </Form>\n      {props.children}\n    </div>\n  );\n});\n\nexport default withRouter(LoginOrRegister);\n","import { memo } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport { paths, pathNames } from '../utils/constants';\n\nimport auth from '../api/auth';\n\nimport LoginOrRegister from './LoginOrRegister';\n\nconst defaultProps = {\n  passwordAutocomplete: 'current-password',\n  title: pathNames.login.title,\n  buttonTitle: pathNames.login.action,\n};\n\nconst Login = memo(props => {\n  const [email, setEmail] = props.states.email;\n  const [password, setPassword] = props.states.password;\n\n  function handleSubmit() {\n    if (!email || !password) {\n      return;\n    }\n\n    auth\n      .login(email, password)\n      .then(data => {\n        if (data.token) {\n          setEmail('');\n          setPassword('');\n\n          localStorage.token = data.token;\n\n          props.handleLogin(email);\n          props.history.push(paths.main);\n        }\n      })\n      .catch(err => console.log(err));\n  }\n\n  return <LoginOrRegister onSubmit={handleSubmit} {...props} {...defaultProps} />;\n});\n\nexport default withRouter(Login);\n","import { memo } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\n\nimport { paths, pathNames } from '../utils/constants';\n\nimport auth from '../api/auth';\n\nimport LoginOrRegister from './LoginOrRegister';\n\nconst defaultProps = {\n  passwordAutocomplete: 'new-password',\n  title: pathNames.register.title,\n  buttonTitle: pathNames.register.action,\n};\n\nconst Register = memo(props => {\n  const [email] = props.states.email;\n  const [password] = props.states.password;\n\n  function handleSubmit() {\n    auth.register(email, password).then(res => {\n      if (res.statusCode !== 400) {\n        props.history.push(paths.login);\n      }\n    });\n  }\n\n  return (\n    <LoginOrRegister onSubmit={handleSubmit} {...props} {...defaultProps}>\n      <div className=\"auth__signin\">\n        Уже зарегистрированы?{' '}\n        <Link to={paths.login} className=\"auth__login-link\">\n          {pathNames.login.action}\n        </Link>\n      </div>\n    </LoginOrRegister>\n  );\n});\n\nexport default withRouter(Register);\n","import { memo, useState } from 'react';\nimport { withRouter } from 'react-router';\n\nimport { paths } from '../utils/constants';\n\nimport Login from './Login';\nimport Register from './Register';\n\nconst Authentication = memo(props => {\n  const states = {\n    email: useState(''),\n    password: useState(''),\n  };\n\n  const pathIsLogin = props.location.pathname === paths.login;\n\n  return pathIsLogin ? (\n    <Login handleLogin={props.handleLogin} states={states} />\n  ) : (\n    <Register states={states} />\n  );\n});\n\nexport default withRouter(Authentication);\n","import { Route, Redirect } from 'react-router-dom';\n\nimport { paths } from '../utils/constants';\n\nconst ProtectedRoute = props => {\n  return <Route>{props.loggedIn ? props.children : <Redirect to={paths.login} />}</Route>;\n};\n\nexport default ProtectedRoute;\n","export default __webpack_public_path__ + \"static/media/logo.6fa47d29.svg\";","import { memo } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\n\nimport { homepage } from '../../package.json';\n\nimport { paths, pathNames } from '../utils/constants';\n\nimport logo from '../images/logo.svg';\n\nconst Header = memo(props => {\n  let buttonTitle;\n  let buttonLink = paths.login;\n  let loggedIn = false;\n\n  switch (props.location.pathname) {\n    case paths.login:\n      buttonTitle = pathNames.register.title;\n      buttonLink = paths.register;\n      break;\n\n    case paths.register:\n      buttonTitle = pathNames.register.action;\n      break;\n\n    default:\n      buttonTitle = pathNames.quit.action;\n      loggedIn = true;\n      break;\n  }\n\n  function signOut() {\n    delete localStorage.token;\n    props.history.push(paths.login);\n  }\n\n  return (\n    <header className=\"header\">\n      <a target=\"_self\" href={homepage} className=\"logo header__logo\">\n        <img className=\"logo__img\" alt=\"Mesto\" src={logo} />\n      </a>\n      <div className=\"header__container\">\n        {loggedIn && props.credential ? (\n          <p className=\"header__credential\">{props.credential}</p>\n        ) : null}\n        <Link\n          to={buttonLink}\n          onClick={loggedIn ? signOut : null}\n          className={`header__action-button${loggedIn ? ' header__action-button_dimmed' : ''}`}\n        >\n          {buttonTitle}\n        </Link>\n      </div>\n    </header>\n  );\n});\n\nexport default withRouter(Header);\n","import { memo } from 'react';\n\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\n\nconst defaults = {\n  cardDeleteButtonClassName: 'element__trash-button',\n  cardLikeButtonClassName: 'element__like-button',\n};\n\nconst Card = memo(props => {\n  const { card } = props;\n\n  card.likes = card.likes ?? [];\n\n  const currentUser = useCurrentUser();\n\n  if (card.isTemporarilyLocal) {\n    card.owner = currentUser;\n  }\n\n  const cardDeleteButtonClassNames = [defaults.cardDeleteButtonClassName];\n\n  const isOwn = card.owner._id === currentUser._id;\n  if (isOwn) {\n    const cardDeleteButtonClassNameAttrubited = `${defaults.cardDeleteButtonClassName}_visible`;\n    cardDeleteButtonClassNames.push(cardDeleteButtonClassNameAttrubited);\n  }\n\n  const cardDeleteButtonFinalClassName = cardDeleteButtonClassNames.join(' ');\n\n  const cardLikeButtonClassNames = [defaults.cardLikeButtonClassName];\n\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  if (isLiked) {\n    const cardLikeButtonClassNameAttributed = `${defaults.cardLikeButtonClassName}_active`;\n    cardLikeButtonClassNames.push(cardLikeButtonClassNameAttributed);\n  }\n\n  const cardLikeButtonFinalClassName = cardLikeButtonClassNames.join(' ');\n\n  function handleImageClick() {\n    props.onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    if (card.isTemporarilyLocal) return;\n    props.onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    if (card.isTemporarilyLocal) return;\n    props.onCardDelete(card);\n  }\n\n  return (\n    <li className=\"element\">\n      <img onClick={handleImageClick} className=\"element__image\" alt={card.name} src={card.link} />\n      <button onClick={handleDeleteClick} type=\"reset\" className={cardDeleteButtonFinalClassName} />\n      <div className=\"element__container\">\n        <h2 className=\"element__title\">{card.name}</h2>\n        <div className=\"element__likes\">\n          <button\n            onClick={handleLikeClick}\n            type=\"button\"\n            className={cardLikeButtonFinalClassName}\n          />\n          <p className=\"element__like-counter\">{card.likes.length}</p>\n        </div>\n      </div>\n    </li>\n  );\n});\n\nexport default Card;\n","import { memo } from 'react';\n\nimport { author, homepage } from '../../package.json';\n\nconst linkSeparator = '/';\n\nconst homepageSplitted = homepage.split(linkSeparator);\nhomepageSplitted.pop();\n\nconst copyrightLink = homepageSplitted.join(linkSeparator);\n\nconst Footer = memo(() => (\n  <footer className=\"footer\">\n    <a target=\"_blank\" rel=\"noreferrer\" href={copyrightLink} className=\"footer__copyright\">\n      &copy; 2021 {author}\n    </a>\n  </footer>\n));\n\nexport default Footer;\n","export const popupSelectors = {\n  closeButtonClass: 'popup__close-button',\n};\n\nexport const defaultFormConfig = {\n  formSelector: '.form',\n  inputSelector: '.form__input',\n  submitButtonSelector: '.form__button',\n  inputErrorClass: 'form__input_type_error',\n  errorClass: 'form__error_visible',\n};\n","export default class FormValidator {\n  constructor(data, element) {\n    this._data = data;\n    this._element = element;\n\n    this._inputList = Array.from(this._element.querySelectorAll(this._data.inputSelector));\n\n    this._buttonElement = this._element.querySelector(this._data.submitButtonSelector);\n  }\n\n  enableValidation() {\n    this._toggleButtonState();\n\n    this._setListeners();\n  }\n\n  _showInputError = (inputElement, errorMessage) => {\n    const errorElement = this._element.querySelector(`#${inputElement.id}-error`);\n    inputElement.classList.add(this._data.inputErrorClass);\n    errorElement.textContent = errorMessage;\n    errorElement.classList.add(this._data.errorClass);\n  };\n\n  _hideInputError = inputElement => {\n    const errorElement = this._element.querySelector(`#${inputElement.id}-error`);\n    inputElement.classList.remove(this._data.inputErrorClass);\n    errorElement.classList.remove(this._data.errorClass);\n    errorElement.textContent = '';\n  };\n\n  _resetFormErrors = () => {\n    this._inputList.forEach(inputElement => this._hideInputError(inputElement));\n    this._toggleButtonState(1);\n  };\n\n  _checkInputValidity = inputElement =>\n    inputElement.validity.valid\n      ? this._hideInputError(inputElement)\n      : this._showInputError(inputElement, inputElement.validationMessage);\n\n  _hasInvalidInput = inputList => inputList.some(inputElement => !inputElement.validity.valid);\n\n  _toggleButtonState = disable =>\n    (this._buttonElement.disabled = disable || this._hasInvalidInput(this._inputList));\n\n  _validationHandler = inputElement => {\n    this._checkInputValidity(inputElement);\n\n    this._toggleButtonState();\n  };\n\n  _setListeners = () => {\n    this._element.addEventListener('reset', this._resetFormErrors);\n\n    this._inputList.forEach(inputElement => {\n      if (inputElement.value) {\n        this._validationHandler(inputElement);\n      }\n      inputElement.addEventListener('input', () => this._validationHandler(inputElement));\n    });\n  };\n}\n","import { useState, useEffect, memo } from 'react';\n\nconst POPUP_ANIMATION_DURATION = 300;\n\nconst defaults = {\n  className: 'popup',\n  classNameClosed: '',\n  isOpened: false,\n};\ndefaults.classNameOpened = `${defaults.className}_opened`;\n\nconst Popup = memo(props => {\n  const [classNameForAnimation, setClassNameForAnimation] = useState(defaults.classNameClosed);\n  const [shouldAppearInDOM, setShouldAppearInDOM] = useState(defaults.isOpened);\n\n  useEffect(() => {\n    if (!props.isOpen) {\n      document.activeElement.blur(); // fixes mobile keyboard being stuck on the screen after form submission (due to `event.preventDefault()`)\n    }\n\n    if (props.isOpen) {\n      setShouldAppearInDOM(!defaults.isOpened);\n      const showingTimout = setTimeout(() => {\n        setClassNameForAnimation(defaults.classNameOpened);\n      }, 10);\n\n      return () => clearTimeout(showingTimout);\n    } else {\n      setClassNameForAnimation(defaults.classNameClosed);\n      const hidingTimeout = setTimeout(() => {\n        setShouldAppearInDOM(defaults.isOpened);\n      }, POPUP_ANIMATION_DURATION);\n\n      return () => clearTimeout(hidingTimeout);\n    }\n  }, [props.isOpen]);\n\n  if (!shouldAppearInDOM) {\n    return null;\n  }\n\n  const classNames = [defaults.className, props.className, classNameForAnimation].filter(\n    el => el != null && el !== ''\n  );\n\n  const className = classNames.join(' ');\n\n  return (\n    <section onClick={props.onClick} className={className} id={props.id}>\n      {props.children}\n    </section>\n  );\n});\n\nexport default Popup;\n","import { memo, useCallback, useEffect } from 'react';\n\nimport { popupSelectors } from '../utils/utils';\nimport enableValidation from '../utils/enableValidation';\nimport { defaultFormConfig } from '../utils/utils';\n\nimport Popup from './Popup';\nimport Form from './Form';\n\nconst defaultButtonTitle = 'Сохранить';\n\nconst PopupWithForm = memo(props => {\n  const { onSubmit, children, ...propsWithoutCustom } = props;\n  props = propsWithoutCustom;\n\n  const buttonTitle = props.buttonTitle ?? defaultButtonTitle;\n\n  const handleSubmit = useCallback(\n    e => {\n      onSubmit && onSubmit(e);\n\n      if (children) {\n        e.target.reset();\n      }\n    },\n    [children, onSubmit]\n  );\n\n  const popupId = props.name;\n\n  useEffect(() => {\n    if (props.isOpen) {\n      const validationTimeout = setTimeout(() => {\n        enableValidation(\n          document.getElementById(popupId).querySelector(defaultFormConfig.formSelector)\n        );\n      }, 1);\n\n      return () => clearTimeout(validationTimeout);\n    }\n  }, [popupId, props.isOpen]);\n\n  return (\n    <Popup isOpen={props.isOpen} onClick={props.onClose} id={popupId}>\n      <div className=\"popup__container\">\n        <button type=\"reset\" className={popupSelectors.closeButtonClass} />\n        <h2 className=\"popup__title\">{props.title}</h2>\n\n        <Form className=\"form\" onSubmit={handleSubmit} onReset={props.onReset}>\n          {children}\n          <button type=\"submit\" className=\"popup__button form__button\">\n            {buttonTitle}\n          </button>\n        </Form>\n      </div>\n    </Popup>\n  );\n});\n\nexport default PopupWithForm;\n","import FormValidator from './FormValidator';\nimport { defaultFormConfig } from './utils';\n\nexport default function enableValidation(formElement) {\n  const profileEditorValidator = new FormValidator(defaultFormConfig, formElement);\n  profileEditorValidator.enableValidation();\n}\n","import { useState, useEffect, memo } from 'react';\n\nimport {\n  useCurrentUser,\n  useCurrentUserDispatcher,\n  sendApiUpdate,\n} from '../contexts/CurrentUserContext';\n\nimport PopupWithForm from './PopupWithForm';\nimport PopupInput from './FormInput';\n\nconst EditProfilePopup = memo(props => {\n  const [name, setName] = useState('');\n  const [about, setAbout] = useState('');\n\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useCurrentUserDispatcher();\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setAbout(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit() {\n    sendApiUpdate(\n      setCurrentUser,\n      currentUser,\n      {\n        name,\n        about,\n      },\n      'editProfile'\n    );\n\n    props.onUpdateUser();\n  }\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleAboutChange(e) {\n    setAbout(e.target.value);\n  }\n\n  return (\n    <PopupWithForm\n      {...props}\n      onSubmit={handleSubmit}\n      title=\"Редактировать профиль\"\n      name=\"profile-editor\"\n    >\n      <PopupInput\n        isFocused={props.isOpen}\n        value={name}\n        onChange={handleNameChange}\n        autoComplete=\"name\"\n        autoCapitalize=\"words\"\n        name=\"name\"\n        id=\"profile-name\"\n        placeholder=\"Имя\"\n        maxLength=\"40\"\n      />\n\n      <PopupInput\n        value={about}\n        onChange={handleAboutChange}\n        name=\"about\"\n        id=\"profile-about\"\n        placeholder=\"О себе\"\n        maxLength=\"200\"\n      />\n    </PopupWithForm>\n  );\n});\n\nexport default EditProfilePopup;\n","import { memo, useRef } from 'react';\n\nimport {\n  useCurrentUser,\n  useCurrentUserDispatcher,\n  sendApiUpdate,\n} from '../contexts/CurrentUserContext';\n\nimport PopupWithForm from './PopupWithForm';\nimport PopupInput from './FormInput';\n\nconst EditAvatarPopup = memo(props => {\n  const ref = useRef();\n\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useCurrentUserDispatcher();\n\n  function handleSubmit() {\n    sendApiUpdate(\n      setCurrentUser,\n      currentUser,\n      {\n        avatar: ref.current.value,\n      },\n      'updateAvatar'\n    );\n\n    props.onUpdateAvatar();\n  }\n\n  return (\n    <PopupWithForm {...props} onSubmit={handleSubmit} title=\"Обновить аватар\" name=\"avatar-editor\">\n      <PopupInput\n        isFocused={props.isOpen}\n        ref={ref}\n        type=\"url\"\n        name=\"avatar\"\n        id=\"profile-avatar\"\n        placeholder=\"Ссылка на картинку\"\n      />\n    </PopupWithForm>\n  );\n});\n\nexport default EditAvatarPopup;\n","import { memo, useState } from 'react';\n\nimport PopupWithForm from './PopupWithForm';\nimport PopupInput from './FormInput';\n\nconst defaults = {\n  title: '',\n  link: '',\n};\n\nconst AddPlacePopup = memo(props => {\n  const [title, setTitle] = useState(defaults.title);\n  const [link, setLink] = useState(defaults.link);\n\n  function handleSubmit() {\n    props.onAddPlace(title, link);\n  }\n\n  function handleReset() {\n    setTitle(defaults.title);\n    setLink(defaults.link);\n  }\n\n  function handleTitleChange(e) {\n    setTitle(e.target.value);\n  }\n\n  function handleLinkChange(e) {\n    setLink(e.target.value);\n  }\n\n  return (\n    <PopupWithForm\n      {...props}\n      onSubmit={handleSubmit}\n      onReset={handleReset}\n      title=\"Новое место\"\n      name=\"element-editor\"\n      buttonTitle=\"Создать\"\n    >\n      <PopupInput\n        isFocused={props.isOpen}\n        value={title}\n        onChange={handleTitleChange}\n        name=\"title\"\n        id=\"element-title\"\n        placeholder=\"Название\"\n        maxLength=\"30\"\n      />\n\n      <PopupInput\n        value={link}\n        onChange={handleLinkChange}\n        type=\"url\"\n        name=\"link\"\n        id=\"element-link\"\n        placeholder=\"Ссылка на картинку\"\n      />\n    </PopupWithForm>\n  );\n});\n\nexport default AddPlacePopup;\n","import { memo } from 'react';\n\nimport PopupWithForm from './PopupWithForm';\n\nconst ConfirmDeletePopup = memo(props => {\n  function handleSubmit() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <PopupWithForm\n      {...props}\n      onSubmit={handleSubmit}\n      title=\"Вы уверены?\"\n      name=\"delete-confirmation\"\n      buttonTitle=\"Да\"\n    />\n  );\n});\n\nexport default ConfirmDeletePopup;\n","import { memo } from 'react';\n\nimport { popupSelectors } from '../utils/utils';\n\nimport Popup from './Popup';\n\nconst classNames = [\n  popupSelectors.closeButtonClass,\n  `${popupSelectors.closeButtonClass}_parent-corners_straight`,\n];\n\nconst className = classNames.join(' ');\n\nconst ImagePopup = memo(props => {\n  const card = props.card;\n\n  return (\n    <Popup\n      isOpen={props.isOpen}\n      onClick={props.onClose}\n      className=\"popup_type_image\"\n      id=\"image-viewer\"\n    >\n      <figure className=\"popup__figure\">\n        <button type=\"button\" className={className} />\n        <img className=\"popup__image\" alt={card.name} src={card.link} />\n        <figcaption className=\"popup__caption\">{card.name}</figcaption>\n      </figure>\n    </Popup>\n  );\n});\n\nexport default ImagePopup;\n","import React from 'react';\n\nimport { Route, Switch, withRouter } from 'react-router-dom';\n\nimport { paths } from '../utils/constants';\nimport useStateWithLocalStorage from '../hooks/useStateWithLocalStorage';\nimport api from '../api/api';\nimport auth from '../api/auth';\n\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\n\nimport Authentication from './Authentication';\nimport ProtectedRoute from './ProtectedRoute';\n\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\n\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\nimport ImagePopup from './ImagePopup';\n\nfunction App(props) {\n  const currentUser = useCurrentUser();\n\n  const [loggedIn, setLoggedIn] = React.useState(!!localStorage.token);\n  const [email, setEmail] = React.useState('');\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  const [cards, setCards] = useStateWithLocalStorage('cards', []);\n\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then(setCards)\n      .catch(err => console.log('Couldnt get initial cards from the server', err));\n  }, [setCards]);\n\n  async function handleCardLike(card) {\n    const oldCards = cards;\n\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    const expectedCardLikes = isLiked\n      ? card.likes.filter(like => like._id !== currentUser._id)\n      : [...card.likes, currentUser];\n\n    const expectedCard = { ...card, likes: expectedCardLikes };\n\n    setCards(cards.map(c => (c._id === card._id ? expectedCard : c)));\n\n    try {\n      const newCard = await api.changeLikeCardStatus(card._id, !isLiked);\n      setCards(cards.map(c => (c._id === card._id ? newCard : c)));\n    } catch (error) {\n      setCards(oldCards);\n      console.error(error);\n    }\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsConfirmDeletePopupOpen(false);\n    setIsImagePopupOpen(false);\n  }\n\n  const handleCardDelete = React.useCallback(\n    card => {\n      const oldCards = cards;\n\n      setCards(cards.filter(c => c._id !== card._id));\n\n      api.deleteCard(card._id).catch(error => {\n        setCards(oldCards);\n        throw error;\n      });\n\n      closeAllPopups();\n    },\n    [cards, setCards]\n  );\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleConfirmDeleteClick(card) {\n    setSelectedCard(card);\n\n    setIsConfirmDeletePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n\n    setIsImagePopupOpen(true);\n  }\n\n  const handlePopupClick = React.useCallback(e => {\n    if (e.target === e.currentTarget) {\n      closeAllPopups();\n    }\n  }, []);\n\n  const handleUpdateUser = closeAllPopups;\n  const handleUpdateAvatar = closeAllPopups;\n\n  function handleAddPlaceSubmit(title, link) {\n    const oldCards = cards;\n\n    const expectedCard = {\n      isTemporarilyLocal: true,\n      name: title,\n      link,\n    };\n\n    setCards([expectedCard, ...cards]);\n\n    api\n      .addCard(title, link)\n      .then(newCard => setCards([newCard, ...cards]))\n      .catch(() => setCards(oldCards));\n\n    closeAllPopups();\n  }\n\n  const escHandler = React.useCallback(e => {\n    if (e.key === 'Escape') {\n      closeAllPopups();\n    }\n  }, []);\n\n  React.useEffect(() => {\n    const listenerArgs = ['keydown', escHandler, false];\n\n    document.addEventListener(...listenerArgs);\n\n    return () => document.removeEventListener(...listenerArgs);\n  }, [escHandler]);\n\n  const handleLogin = React.useCallback(\n    email => {\n      setEmail(email);\n      setLoggedIn(true);\n    },\n    [setLoggedIn]\n  );\n\n  const handleTokenCheck = React.useCallback(() => {\n    if (localStorage.token) {\n      auth.token = localStorage.token;\n      auth\n        .getUserInfo()\n        .then(res => {\n          if (res) {\n            handleLogin(res.email);\n            props.history.push(paths.main);\n          }\n        })\n        .catch(err => {\n          setLoggedIn(false);\n\n          console.log(err);\n        });\n    }\n  }, [handleLogin, props.history]);\n\n  React.useEffect(() => {\n    handleTokenCheck();\n  }, [handleTokenCheck]);\n\n  return (\n    <>\n      <Header credential={email} />\n      <Switch>\n        <Route path={[paths.register, paths.login]}>\n          <Authentication handleLogin={handleLogin} />\n        </Route>\n        <ProtectedRoute path={paths.main} loggedIn={loggedIn}>\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            cards={cards}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleConfirmDeleteClick}\n          />\n\n          <EditProfilePopup\n            onUpdateUser={handleUpdateUser}\n            isOpen={isEditProfilePopupOpen}\n            onClose={handlePopupClick}\n          />\n\n          <AddPlacePopup\n            onAddPlace={handleAddPlaceSubmit}\n            isOpen={isAddPlacePopupOpen}\n            onClose={handlePopupClick}\n          />\n\n          <EditAvatarPopup\n            onUpdateAvatar={handleUpdateAvatar}\n            isOpen={isEditAvatarPopupOpen}\n            onClose={handlePopupClick}\n          />\n\n          <ConfirmDeletePopup\n            card={selectedCard}\n            onCardDelete={handleCardDelete}\n            isOpen={isConfirmDeletePopupOpen}\n            onClose={handlePopupClick}\n          />\n\n          <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={handlePopupClick} />\n        </ProtectedRoute>\n      </Switch>\n      <Footer />\n    </>\n  );\n}\n\nexport default withRouter(App);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { CurrentUserProvider } from './contexts/CurrentUserContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <CurrentUserProvider>\n        <App />\n      </CurrentUserProvider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}